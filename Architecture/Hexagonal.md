# Hexagonal Architecture

### Hexagonal Architecture

---

계층형 아키텍처의 단점 보완을 위해 생긴 아키텍처로

- **도메인 중심 아키텍처**의 일종 , **클린 아키텍처**를 일반화한 구조 중 하나이다.

### 계층형 아키텍처의 문제점

---

1. **DB(영속성)에 대한 의존이 퍼진다**

- 도메인 계층이 DB에 의존하게 되어서 DB 변화가 생기면 도메인 계층도 변화됨(**변경에 취약**)

1. **아키텍처 경계를 강제할 수 없다**

- 상위 계층에 있는 컴포넌트를 접근할 목적으로 해당 컴포넌트를 하위 계층으로 내릴 수 있다
- 하지만 이 행위가 계속되면 **경계가 허물어진다**

1. **계층은 Skip 할 수 있다**

- 계층 건너뛰기가 가능하다

1. **서비스의 크기를 강제할 수 없다**

- 하나의 서비스에 많은 서비스 로직을 때려넣기가 가능하다

→ 서비스 테스트 어려워짐, 작업할 유스케이스 찾기 힘들어진다

### Hexagonal Architecture

---

- UI 나 DB 모두 비즈니스 로직으로부터 분리하는 외부 요소로 취급한다

→ 비즈니스 로직이 presentation 계층과 datasource 계층에 의존하도록 만든다

![download](https://github.com/4mjeo/TIL/assets/129156398/95603ff3-e675-4e23-92b2-8390375f6c60)

→ 의존성을 역전시켜 도메인 코드가 바깥쪽 코드에 의존하지 않게 함으로써 **외부로부터의 도메인 로직의 결합을 제거한다** → **유지보수성 좋은 코드**

- **어댑터**
  - driving adapter(=incoming adapter)
    - 애플리케이션 코어를 호출한다(왼쪽 어댑터)
  - driven adapter(=outgoing adapter)
    - 애플리케이션 코어에 의해 호출당한다(오른쪽 어댑터)
- **포트**
  - 애플리케이션 코어와 어댑터 간에 통신을 위한 부분이다
  - 인터페이스로 구성되어 있다
- **애플리케이션 코어**
  - 도메인 엔티티, 유스케이스
  - 외부로 향하는 의존성이 없다(= 모든 의존성은 코어로 향한다)
