# 서브쿼리

### 서브쿼리

---

**서브쿼리?** 하나의 쿼리에서 SELECT 문 안에 또 다른 SELECT 문이 있을 때 안에 포함된 SELECT 문

```java
//예시 코드
//나이가 평균보다 많은 멤버
select m from Member m
where m.age>(select avg(m2.age) from Member m2)
```

메인쿼리의 Member와 서브쿼리의 Member와 달리해야 성능이 잘나옴

- EXISTS, ALL, ANY, IN 등 모두 사용 가능

### 1-1 서브쿼리의 한계

---

- JPA는 WHERE, HAVING 절에서만 서브쿼리를 사용할 수 있음
- FROM 절에서는 서브쿼리 사용 불가능 → 대부분 조인으로 풀어서 해결

→ 그럼에도 사용해야한다? NavtiveQuery 또는 애플리케이션 단에서 쿼리를 두번 날리는 방법 등
